### 前言
---

基于centos7部署服务

### 部署环境

| 软件   | 版本    |
| ------ | ------- |
| python | 3.7.2   |
| django | 1.10.8  |
| nginx  | 1.15.12 |
| mysql  |         |
| uwsgi  | 2.0.19  |
|        |         |
|        |         |

#### 基础环境安装

---

#### python

##### python安装

```
# 下载安装python
wget https://www.python.org/ftp/python/3.7.2/Python-3.7.2.tgz

# 解压进入目录
tar -zxvf Python-3.7.2.tar
cd Python-3.7.2

# 指定安装路径
./configure --prefix=/usr/local/python3

# 编译安装
make && make install

# 建立软连接
ln -s /usr/local/python3/bin/python3.7 /usr/bin/python3
ln -s /usr/local/python3/bin/pip3.7 /usr/bin/pip3

# pip安装环境包（默认为方式一）
方式一：python -m pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ -r requirements.txt

方式二：pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ -r requirements.txt
```

---

#### nginx

##### nginx安装

```
# 下载安装nginx
yum install -y nginx

# 运行服务
systemctl start nginx
```

##### nginx的运行命令

```
# nginx 启动/停止/状态 命令
systemctl start/stop/status nginx
service nginx start/stop/status

# 设置nginx在系统启动时启动
systemctl enable nginx
```

##### nginx配置

```
server {
        listen 8627;
        server_name localhost;
        charset utf-8;

        client_max_body_size 75M;

        location /static {
                root /service/cloud-platform/sunmo;
        }

        location / {
                uwsgi_pass 127.0.0.1:9800;
                include /etc/nginx/uwsgi_params;
        }
}

```

---

#### uwsgi

##### uwsgi安装

```
pip install uwsgi
```

##### uwsgi的运行命令

```
# 启动命令
uwsgi --ini uwsgi.ini

# 停止命令
uwsgi --stop uwsgi.pid
```

##### uwsgi配置

```ini
[uwsgi]
socket=127.0.0.1:9800
chdir=/service/cloud-platform/sunmo
module=sunmo.wsgi:application
wsgi-file=sunmo/wsgi.py
processes=9
threads=3
max-requests=5000
master=true
daemonize=uwsgi.log
uid=1000
gid=2000
pidfile=uwsgi.pid
```

---

